server:
  bind_address: "0.0.0.0:50051"

database:
  sqlite:
    path: "./data/payload-manager.db"
    wal_mode: true

storage:
  ram:
    capacity_bytes: 8589934592  # 8 GiB
    use_hugepages: false
  disk:
    root_path: "/var/lib/payload-manager/payloads"
    capacity_bytes: 107374182400  # 100 GiB
    fsync: true
  object:
    root_path: "s3://payload-manager-prod"
    filesystem: FILE_SYSTEM_S3
    compression: COMPRESSION_UNCOMPRESSED
    filesystem_options:
      s3:
        endpoint_override: "s3.us-east-1.amazonaws.com"
        scheme: "https"
        credentials_kind: S3_CREDENTIALS_KIND_DEFAULT
        tls_verify_certificates: true

spill_workers:
  threads: 4
  retry_backoff: "1s"

leases:
  default_lease: "20s"
  max_lease: "120s"

logging:
  level: "warn"
  pattern: "%+"
  include_trace_context: false

observability:
  metrics_enabled: true
  tracing_enabled: false
  logs_enabled: false
  otlp_endpoint: "http://localhost:4317"
  transport: OTLP_TRANSPORT_HTTP
  metrics:
    request_metrics_enabled: true
    spill_metrics_enabled: true
    tier_occupancy_metrics_enabled: true
    request_latency_histograms_enabled: false
    route_labels_enabled: false
    tier_labels_enabled: true
    min_collection_interval_ms: 1000
    collection_interval_ms: 10000
    export_timeout_ms: 3000
